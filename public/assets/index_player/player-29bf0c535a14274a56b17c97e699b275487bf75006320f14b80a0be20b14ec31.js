$(document).ready(function(){function a(a){var e=$("<div/>").addClass("player-drop").css({left:a,top:t(a)}).appendTo(".player-drops"),o=u-(a+c/2);TweenMax.to(e,.06*Math.abs(o),{x:o,y:.3*Math.abs(o),ease:Quint.easeInOut,force3D:!0,onComplete:function(){e.addClass("player-drop-ready"),TweenMax.to(e,1,{scaleY:1.5,ease:Quad.easeInOut})}})}function e(){var a=$(".player-drop-ready");TweenMax.to(a,.4,{delay:.2,y:v,scaleY:4,scaleX:.5,force3D:!0,ease:Quint.easeIn,onComplete:function(){a.remove()}})}function t(a){return-v-.314*Math.abs(a+c/2-u)}function o(){r.each(function(){var a=$(this);a.attr("data-scale",.5),TweenMax.set(a,{scaleY:0}),a.animBar()})}var n=$(".player-cover"),r=$(".player-spectrum-bar"),s=$(".player-drops"),i=$(".player-spectrum"),l=!0,c=r.width(),p=r.height(),d=n.position(),f=n.width(),u=d.left+f/2,h=f/2,m=(i.position().top,parseFloat(i.css("marginTop")),s.position()),v=m.top-d.top-f;$.fn.animBar=function(a){var e=$(this),t=.1,o=!0;void 0===a&&(a=t+Math.random()*(1-t),o=!1),a>parseFloat(e.attr("data-scale"))&&a>t&&TweenMax.to(e,a*(o?.6:.2),{scaleY:a,attr:{"data-scale":a},ease:Quad.easeOut,onComplete:function(){TweenMax.to(e,.6*a,{scaleY:.1,attr:{"data-scale":.1},ease:Quad.easeIn,onComplete:function(){e.animBar(.5*a)}})},onUpdate:function(){e.checkCoverDrops()}}),o||l||setTimeout(function(){e.animBar()},500*Math.random())},$.fn.checkCoverDrops=function(){var e=$(this),t=e.position();if(t.left+c/2>=d.left&&t.left-c/2<=d.left+f){var o=parseFloat(e.attr("data-scale")),n=o*p;if(n>=v){var r={top:n-v,left:t.left+c/2},s=r.left-u,i=r.top-h;Math.sqrt(s*s+i*i)<h-5&&a(t.left)}}},setInterval(e,1e3),o(),window.play=function(){(l=!l)||o()}});